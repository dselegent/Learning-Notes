##  3.11 å­—é¢é‡ç±»å‹

åœ¨ TypeScript ä¸­ï¼Œå­—é¢é‡ä¸ä»…å¯ä»¥è¡¨ç¤ºå€¼ï¼Œè¿˜å¯ä»¥è¡¨ç¤ºç±»å‹ï¼Œå³æ‰€è°“çš„å­—é¢é‡ç±»å‹ã€‚

### 3.11.1 åŸºæœ¬ä½¿ç”¨

- æ€è€ƒä»¥ä¸‹ä»£ç ï¼Œä¸¤ä¸ªå˜é‡çš„ç±»å‹åˆ†åˆ«æ˜¯ä»€ä¹ˆ?

```ts
let str1 = 'Hello TS'
const str2 = 'Hello TS'
```

- é€šè¿‡ TS ç±»å‹æ¨æ–­æœºåˆ¶ï¼Œå¯ä»¥å¾—åˆ°ç­”æ¡ˆï¼š
  1. å˜é‡ str1 çš„ç±»å‹ä¸ºï¼šstring
  2. å˜é‡ str2 çš„ç±»å‹ä¸ºï¼š'Hello TS'
- è§£é‡Š:

1. str1 æ˜¯ä¸€ä¸ªå˜é‡(let)ï¼Œå®ƒçš„å€¼å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ç±»å‹ä¸º:string
2. str2 æ˜¯ä¸€ä¸ªå¸¸é‡(const)ï¼Œå®ƒçš„å€¼ä¸èƒ½å˜åŒ–åªèƒ½æ˜¯ 'Hello TS'ï¼Œæ‰€ä»¥ï¼Œå®ƒçš„ç±»å‹ä¸º:'Hello TS'

- æ³¨æ„ï¼šæ­¤å¤„çš„ 'Hello TS'ï¼Œå°±æ˜¯ä¸€ä¸ª**å­—é¢é‡ç±»å‹**ï¼Œä¹Ÿå°±æ˜¯è¯´æŸä¸ªç‰¹å®šçš„å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ä½œä¸º TS ä¸­çš„ç±»å‹

ç›®å‰ï¼ŒTypeScript æ”¯æŒ 3 ç§å­—é¢é‡ç±»å‹ï¼šå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ã€æ•°å­—å­—é¢é‡ç±»å‹ã€å¸ƒå°”å­—é¢é‡ç±»å‹ï¼Œå¯¹åº”çš„å­—ç¬¦ä¸²å­—é¢é‡ã€æ•°å­—å­—é¢é‡ã€å¸ƒå°”å­—é¢é‡åˆ†åˆ«æ‹¥æœ‰ä¸å…¶å€¼ä¸€æ ·çš„å­—é¢é‡ç±»å‹ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š

```typescript
{
  let specifiedStr: 'this is string' = 'this is string';
  let specifiedNum: 1 = 1;
  let specifiedBoolean: true = true;
}
```

æ¯”å¦‚ 'this is string' ï¼ˆè¿™é‡Œè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ï¼‰ç±»å‹æ˜¯ string ç±»å‹ï¼ˆç¡®åˆ‡åœ°è¯´æ˜¯ string ç±»å‹çš„å­ç±»å‹ï¼‰ï¼Œè€Œ string ç±»å‹ä¸ä¸€å®šæ˜¯ 'this is string'ï¼ˆè¿™é‡Œè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ï¼‰ç±»å‹ï¼Œå¦‚ä¸‹å…·ä½“ç¤ºä¾‹ï¼š

```typescript
{
  let specifiedStr: 'this is string' = 'this is string';
  let str: string = 'any string';
  specifiedStr = str; // ts(2322) ç±»å‹ '"string"' ä¸èƒ½èµ‹å€¼ç»™ç±»å‹ 'this is string'
  str = specifiedStr; // ok 
}
```

'this is string' å­—é¢é‡ç±»å‹å¯ä»¥ç»™ string ç±»å‹èµ‹å€¼ï¼Œä½†æ˜¯ string ç±»å‹ä¸èƒ½ç»™ 'this is string' å­—é¢é‡ç±»å‹èµ‹å€¼ã€‚

### 3.11.2 å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹

ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ä½œä¸ºå˜é‡çš„ç±»å‹ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š

```js
let hello: 'hello' = 'hello';
hello = 'hi'; // ts(2322) Type '"hi"' is not assignable to type '"hello"'
```

å®é™…ä¸Šï¼Œå®šä¹‰å•ä¸ªçš„å­—é¢é‡ç±»å‹å¹¶æ²¡æœ‰å¤ªå¤§çš„ç”¨å¤„ï¼Œå®ƒçœŸæ­£çš„åº”ç”¨åœºæ™¯æ˜¯å¯ä»¥æŠŠå¤šä¸ªå­—é¢é‡ç±»å‹ç»„åˆæˆä¸€ä¸ªè”åˆç±»å‹ï¼ˆåé¢ä¼šè®²è§£ï¼‰ï¼Œç”¨æ¥æè¿°æ‹¥æœ‰æ˜ç¡®æˆå‘˜çš„å®ç”¨çš„é›†åˆã€‚

å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œæˆ‘ä»¬ä½¿ç”¨å­—é¢é‡è”åˆç±»å‹æè¿°äº†ä¸€ä¸ªæ˜ç¡®ã€å¯ 'up' å¯ 'down' çš„é›†åˆï¼Œè¿™æ ·å°±èƒ½æ¸…æ¥šåœ°çŸ¥é“éœ€è¦çš„æ•°æ®ç»“æ„äº†ã€‚

```js
type Direction = 'up' | 'down';

function move(dir: Direction) {
  // ...
}
move('up'); // ok
move('right'); // ts(2345) Argument of type '"right"' is not assignable to parameter of type 'Direction'
```

é€šè¿‡ä½¿ç”¨å­—é¢é‡ç±»å‹ç»„åˆçš„è”åˆç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥é™åˆ¶å‡½æ•°çš„å‚æ•°ä¸ºæŒ‡å®šçš„å­—é¢é‡ç±»å‹é›†åˆï¼Œç„¶åç¼–è¯‘å™¨ä¼šæ£€æŸ¥å‚æ•°æ˜¯å¦æ˜¯æŒ‡å®šçš„å­—é¢é‡ç±»å‹é›†åˆé‡Œçš„æˆå‘˜ã€‚

å› æ­¤ï¼Œç›¸è¾ƒäºä½¿ç”¨ string ç±»å‹ï¼Œä½¿ç”¨å­—é¢é‡ç±»å‹ï¼ˆç»„åˆçš„è”åˆç±»å‹ï¼‰å¯ä»¥å°†å‡½æ•°çš„å‚æ•°é™å®šä¸ºæ›´å…·ä½“çš„ç±»å‹ã€‚è¿™ä¸ä»…æå‡äº†ç¨‹åºçš„å¯è¯»æ€§ï¼Œè¿˜ä¿è¯äº†å‡½æ•°çš„å‚æ•°ç±»å‹ï¼Œå¯è°“ä¸€ä¸¾ä¸¤å¾—ã€‚

### 3.11.3 æ•°å­—å­—é¢é‡ç±»å‹åŠå¸ƒå°”å­—é¢é‡ç±»å‹

æ•°å­—å­—é¢é‡ç±»å‹å’Œå¸ƒå°”å­—é¢é‡ç±»å‹çš„ä½¿ç”¨ä¸å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹çš„ä½¿ç”¨ç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å­—é¢é‡ç»„åˆçš„è”åˆç±»å‹å°†å‡½æ•°çš„å‚æ•°é™å®šä¸ºæ›´å…·ä½“çš„ç±»å‹ï¼Œæ¯”å¦‚å£°æ˜å¦‚ä¸‹æ‰€ç¤ºçš„ä¸€ä¸ªç±»å‹ Configï¼š

```ts
interface Config {
    size: 'small' | 'big';
    isEnable:  true | false;
    margin: 0 | 2 | 4;
}
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬é™å®šäº† size å±æ€§ä¸ºå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ 'small' | 'big'ï¼ŒisEnable å±æ€§ä¸ºå¸ƒå°”å­—é¢é‡ç±»å‹ true | falseï¼ˆå¸ƒå°”å­—é¢é‡åªåŒ…å« true å’Œ falseï¼Œtrue | false çš„ç»„åˆè·Ÿç›´æ¥ä½¿ç”¨ boolean æ²¡æœ‰åŒºåˆ«ï¼‰ï¼Œmargin å±æ€§ä¸ºæ•°å­—å­—é¢é‡ç±»å‹ 0 | 2 | 4ã€‚

### 3.11.4 letå’Œconståˆ†æ

æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ª const ç¤ºä¾‹ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š

```js
{
  const str = 'this is string'; // str: 'this is string'
  const num = 1; // num: 1
  const bool = true; // bool: true
}
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å°† const å®šä¹‰ä¸ºä¸€ä¸ªä¸å¯å˜æ›´çš„å¸¸é‡ï¼Œåœ¨ç¼ºçœç±»å‹æ³¨è§£çš„æƒ…å†µä¸‹ï¼ŒTypeScript æ¨æ–­å‡ºå®ƒçš„ç±»å‹ç›´æ¥ç”±èµ‹å€¼å­—é¢é‡çš„ç±»å‹å†³å®šï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§æ¯”è¾ƒåˆç†çš„è®¾è®¡ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å¦‚ä¸‹æ‰€ç¤ºçš„ let ç¤ºä¾‹:

```js
{

  let str = 'this is string'; // str: string
  let num = 1; // num: number
  let bool = true; // bool: boolean
}
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œç¼ºçœæ˜¾å¼ç±»å‹æ³¨è§£çš„å¯å˜æ›´çš„å˜é‡çš„ç±»å‹è½¬æ¢ä¸ºäº†èµ‹å€¼å­—é¢é‡ç±»å‹çš„çˆ¶ç±»å‹ï¼Œæ¯”å¦‚ str çš„ç±»å‹æ˜¯ 'this is string' ç±»å‹ï¼ˆè¿™é‡Œè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ï¼‰çš„çˆ¶ç±»å‹ stringï¼Œnum çš„ç±»å‹æ˜¯ 1 ç±»å‹çš„çˆ¶ç±»å‹ numberã€‚

è¿™ç§è®¾è®¡ç¬¦åˆç¼–ç¨‹é¢„æœŸï¼Œæ„å‘³ç€æˆ‘ä»¬å¯ä»¥åˆ†åˆ«èµ‹äºˆ str å’Œ num ä»»æ„å€¼ï¼ˆåªè¦ç±»å‹æ˜¯ string å’Œ number çš„å­é›†çš„å˜é‡ï¼‰ï¼š

```js
  str = 'any string';
  num = 2;
  bool = false;
```

æˆ‘ä»¬å°† TypeScript çš„å­—é¢é‡å­ç±»å‹è½¬æ¢ä¸ºçˆ¶ç±»å‹çš„è¿™ç§è®¾è®¡ç§°ä¹‹ä¸º "literal widening"ï¼Œä¹Ÿå°±æ˜¯å­—é¢é‡ç±»å‹çš„æ‹“å®½ï¼Œæ¯”å¦‚ä¸Šé¢ç¤ºä¾‹ä¸­æåˆ°çš„å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹è½¬æ¢æˆ string ç±»å‹ï¼Œä¸‹é¢æˆ‘ä»¬ç€é‡ä»‹ç»ä¸€ä¸‹ã€‚

### 3.11.5 ä½¿ç”¨æ¨¡å¼å’Œåœºæ™¯

- ä½¿ç”¨æ¨¡å¼ï¼š**å­—é¢é‡ç±»å‹é…åˆè”åˆç±»å‹ä¸€èµ·ä½¿ç”¨**
- ä½¿ç”¨åœºæ™¯ï¼šç”¨æ¥è¡¨ç¤ºä¸€ç»„æ˜ç¡®çš„å¯é€‰å€¼åˆ—è¡¨
- æ¯”å¦‚ï¼Œåœ¨è´ªåƒè›‡æ¸¸æˆä¸­ï¼Œæ¸¸æˆçš„æ–¹å‘çš„å¯é€‰å€¼åªèƒ½æ˜¯ä¸Šã€ä¸‹ã€å·¦ã€å³ä¸­çš„ä»»æ„ä¸€ä¸ª

```ts
// ä½¿ç”¨è‡ªå®šä¹‰ç±»å‹:
type Direction = 'up' | 'down' | 'left' | 'right'

function changeDirection(direction: Direction) {
  console.log(direction)
}

// è°ƒç”¨å‡½æ•°æ—¶ï¼Œä¼šæœ‰ç±»å‹æç¤ºï¼š
changeDirection('up')
```

- è§£é‡Šï¼šå‚æ•° direction çš„å€¼åªèƒ½æ˜¯ up/down/left/right ä¸­çš„ä»»æ„ä¸€ä¸ª
- ä¼˜åŠ¿ï¼šç›¸æ¯”äº string ç±»å‹ï¼Œä½¿ç”¨å­—é¢é‡ç±»å‹æ›´åŠ ç²¾ç¡®ã€ä¸¥è°¨

### 3.11.6 ç±»å‹æ‹“å®½(Type Widening)

æ‰€æœ‰é€šè¿‡ let æˆ– var å®šä¹‰çš„å˜é‡ã€å‡½æ•°çš„å½¢å‚ã€å¯¹è±¡çš„éåªè¯»å±æ€§ï¼Œå¦‚æœæ»¡è¶³æŒ‡å®šäº†åˆå§‹å€¼ä¸”æœªæ˜¾å¼æ·»åŠ ç±»å‹æ³¨è§£çš„æ¡ä»¶ï¼Œé‚£ä¹ˆå®ƒä»¬æ¨æ–­å‡ºæ¥çš„ç±»å‹å°±æ˜¯æŒ‡å®šçš„åˆå§‹å€¼å­—é¢é‡ç±»å‹æ‹“å®½åçš„ç±»å‹ï¼Œè¿™å°±æ˜¯å­—é¢é‡ç±»å‹æ‹“å®½ã€‚

ä¸‹é¢æˆ‘ä»¬é€šè¿‡å­—ç¬¦ä¸²å­—é¢é‡çš„ç¤ºä¾‹æ¥ç†è§£ä¸€ä¸‹å­—é¢é‡ç±»å‹æ‹“å®½ï¼š

```js
  let str = 'this is string'; // ç±»å‹æ˜¯ string
  let strFun = (str = 'this is string') => str; // ç±»å‹æ˜¯ (str?: string) => string;
  const specifiedStr = 'this is string'; // ç±»å‹æ˜¯ 'this is string'
  let str2 = specifiedStr; // ç±»å‹æ˜¯ 'string'
  let strFun2 = (str = specifiedStr) => str; // ç±»å‹æ˜¯ (str?: string) => string;
```

å› ä¸ºç¬¬ 1~2 è¡Œæ»¡è¶³äº† letã€å½¢å‚ä¸”æœªæ˜¾å¼å£°æ˜ç±»å‹æ³¨è§£çš„æ¡ä»¶ï¼Œæ‰€ä»¥å˜é‡ã€å½¢å‚çš„ç±»å‹æ‹“å®½ä¸º stringï¼ˆå½¢å‚ç±»å‹ç¡®åˆ‡åœ°è®²æ˜¯ string | undefinedï¼‰ã€‚

å› ä¸ºç¬¬ 3 è¡Œçš„å¸¸é‡ä¸å¯å˜æ›´ï¼Œç±»å‹æ²¡æœ‰æ‹“å®½ï¼Œæ‰€ä»¥ specifiedStr çš„ç±»å‹æ˜¯ 'this is string' å­—é¢é‡ç±»å‹ã€‚

ç¬¬ 4~5 è¡Œï¼Œå› ä¸ºèµ‹äºˆçš„å€¼ specifiedStr çš„ç±»å‹æ˜¯å­—é¢é‡ç±»å‹ï¼Œä¸”æ²¡æœ‰æ˜¾å¼ç±»å‹æ³¨è§£ï¼Œæ‰€ä»¥å˜é‡ã€å½¢å‚çš„ç±»å‹ä¹Ÿè¢«æ‹“å®½äº†ã€‚å…¶å®ï¼Œè¿™æ ·çš„è®¾è®¡ç¬¦åˆå®é™…ç¼–ç¨‹è¯‰æ±‚ã€‚æˆ‘ä»¬è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœ str2 çš„ç±»å‹è¢«æ¨æ–­ä¸º 'this is string'ï¼Œå®ƒå°†ä¸å¯å˜æ›´ï¼Œå› ä¸ºèµ‹äºˆä»»ä½•å…¶ä»–çš„å­—ç¬¦ä¸²ç±»å‹çš„å€¼éƒ½ä¼šæç¤ºç±»å‹é”™è¯¯ã€‚

åŸºäºå­—é¢é‡ç±»å‹æ‹“å®½çš„æ¡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹æ‰€ç¤ºä»£ç æ·»åŠ æ˜¾ç¤ºç±»å‹æ³¨è§£æ§åˆ¶ç±»å‹æ‹“å®½è¡Œä¸ºã€‚

```js
{
  const specifiedStr: 'this is string' = 'this is string'; // ç±»å‹æ˜¯ '"this is string"'
  let str2 = specifiedStr; // å³ä¾¿ä½¿ç”¨ let å®šä¹‰ï¼Œç±»å‹æ˜¯ 'this is string'
}
```

å®é™…ä¸Šï¼Œé™¤äº†å­—é¢é‡ç±»å‹æ‹“å®½ä¹‹å¤–ï¼ŒTypeScript å¯¹æŸäº›ç‰¹å®šç±»å‹å€¼ä¹Ÿæœ‰ç±»ä¼¼ "Type Widening" ï¼ˆç±»å‹æ‹“å®½ï¼‰çš„è®¾è®¡ï¼Œä¸‹é¢æˆ‘ä»¬å…·ä½“æ¥äº†è§£ä¸€ä¸‹ã€‚

æ¯”å¦‚å¯¹ null å’Œ undefined çš„ç±»å‹è¿›è¡Œæ‹“å®½ï¼Œé€šè¿‡ letã€var å®šä¹‰çš„å˜é‡å¦‚æœæ»¡è¶³æœªæ˜¾å¼å£°æ˜ç±»å‹æ³¨è§£ä¸”è¢«èµ‹äºˆäº† null æˆ– undefined å€¼ï¼Œåˆ™æ¨æ–­å‡ºè¿™äº›å˜é‡çš„ç±»å‹æ˜¯ anyï¼š

```js
{
  let x = null; // ç±»å‹æ‹“å®½æˆ any
  let y = undefined; // ç±»å‹æ‹“å®½æˆ any

  /** -----åˆ†ç•Œçº¿------- */
  const z = null; // ç±»å‹æ˜¯ null

  /** -----åˆ†ç•Œçº¿------- */
  let anyFun = (param = null) => param; // å½¢å‚ç±»å‹æ˜¯ null
  let z2 = z; // ç±»å‹æ˜¯ null
  let x2 = x; // ç±»å‹æ˜¯ null
  let y2 = y; // ç±»å‹æ˜¯ undefined
}
```

**æ³¨æ„ï¼šåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¸€äº›æ¯”è¾ƒè€çš„ç‰ˆæœ¬ä¸­ï¼ˆ2.0ï¼‰null å’Œ undefined å¹¶ä¸ä¼šè¢«æ‹“å®½æˆâ€œanyâ€ã€‚**

### 3.11.7 ç±»å‹ç¼©å°(Type Narrowing)

åœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŸäº›æ“ä½œå°†å˜é‡çš„ç±»å‹ç”±ä¸€ä¸ªè¾ƒä¸ºå®½æ³›çš„é›†åˆç¼©å°åˆ°ç›¸å¯¹è¾ƒå°ã€è¾ƒæ˜ç¡®çš„é›†åˆï¼Œè¿™å°±æ˜¯ "Type Narrowing"ã€‚

æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»å‹å®ˆå«å°†å‡½æ•°å‚æ•°çš„ç±»å‹ä» any ç¼©å°åˆ°æ˜ç¡®çš„ç±»å‹ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š

```js
{
  let func = (anything: any) => {
    if (typeof anything === 'string') {
      return anything; // ç±»å‹æ˜¯ string 
    } else if (typeof anything === 'number') {
      return anything; // ç±»å‹æ˜¯ number
    }
    return null;
  };
}
```

åœ¨ VS Code ä¸­ hover åˆ°ç¬¬ 4 è¡Œçš„ anything å˜é‡æç¤ºç±»å‹æ˜¯ stringï¼Œåˆ°ç¬¬ 6 è¡Œåˆ™æç¤ºç±»å‹æ˜¯ numberã€‚

åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»å‹å®ˆå«å°†è”åˆç±»å‹ç¼©å°åˆ°æ˜ç¡®çš„å­ç±»å‹ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š

```js
{
  let func = (anything: string | number) => {
    if (typeof anything === 'string') {
      return anything; // ç±»å‹æ˜¯ string 
    } else {
      return anything; // ç±»å‹æ˜¯ number
    }
  };
}
```

å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å­—é¢é‡ç±»å‹ç­‰å€¼åˆ¤æ–­ï¼ˆ===ï¼‰æˆ–å…¶ä»–æ§åˆ¶æµè¯­å¥ï¼ˆåŒ…æ‹¬ä½†ä¸é™äº ifã€ä¸‰ç›®è¿ç®—ç¬¦ã€switch åˆ†æ”¯ï¼‰å°†è”åˆç±»å‹æ”¶æ•›ä¸ºæ›´å…·ä½“çš„ç±»å‹ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š

```js
{
  type Goods = 'pen' | 'pencil' |'ruler';
  const getPenCost = (item: 'pen') => 2;
  const getPencilCost = (item: 'pencil') => 4;
  const getRulerCost = (item: 'ruler') => 6;
  const getCost = (item: Goods) =>  {
    if (item === 'pen') {
      return getPenCost(item); // item => 'pen'
    } else if (item === 'pencil') {
      return getPencilCost(item); // item => 'pencil'
    } else {
      return getRulerCost(item); // item => 'ruler'
    }
  }
}
```

åœ¨ä¸Šè¿° getCost å‡½æ•°ä¸­ï¼Œæ¥å—çš„å‚æ•°ç±»å‹æ˜¯å­—é¢é‡ç±»å‹çš„è”åˆç±»å‹ï¼Œå‡½æ•°å†…åŒ…å«äº† `if` è¯­å¥çš„ 3 ä¸ªæµç¨‹åˆ†æ”¯ï¼Œå…¶ä¸­æ¯ä¸ªæµç¨‹åˆ†æ”¯è°ƒç”¨çš„å‡½æ•°çš„å‚æ•°éƒ½æ˜¯å…·ä½“ç‹¬ç«‹çš„å­—é¢é‡ç±»å‹ã€‚

é‚£ä¸ºä»€ä¹ˆç±»å‹ç”±å¤šä¸ªå­—é¢é‡ç»„æˆçš„å˜é‡ item å¯ä»¥ä¼ å€¼ç»™ä»…æ¥æ”¶å•ä¸€ç‰¹å®šå­—é¢é‡ç±»å‹çš„å‡½æ•° `getPenCostã€getPencilCostã€getRulerCost` å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºåœ¨æ¯ä¸ªæµç¨‹åˆ†æ”¯ä¸­ï¼Œç¼–è¯‘å™¨çŸ¥é“æµç¨‹åˆ†æ”¯ä¸­çš„ item ç±»å‹æ˜¯ä»€ä¹ˆã€‚æ¯”å¦‚ item === 'pencil' çš„åˆ†æ”¯ï¼Œitem çš„ç±»å‹å°±è¢«æ”¶ç¼©ä¸ºâ€œpencilâ€ã€‚

äº‹å®ä¸Šï¼Œå¦‚æœæˆ‘ä»¬å°†ä¸Šé¢çš„ç¤ºä¾‹å»æ‰ä¸­é—´çš„æµç¨‹åˆ†æ”¯ï¼Œç¼–è¯‘å™¨ä¹Ÿå¯ä»¥æ¨æ–­å‡ºæ”¶æ•›åçš„ç±»å‹ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š

```js
  const getCost = (item: Goods) =>  {
    if (item === 'pen') {
      item; // item => 'pen'
    } else {
      item; // => 'pencil' | 'ruler'
    }
  }
```

## 3.12 æšä¸¾ç±»å‹

### 3.12.1 åŸºæœ¬ä½¿ç”¨

- æšä¸¾çš„åŠŸèƒ½ç±»ä¼¼äº**å­—é¢é‡ç±»å‹+è”åˆç±»å‹ç»„åˆ**çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºä¸€ç»„æ˜ç¡®çš„å¯é€‰å€¼
- æšä¸¾ï¼šå®šä¹‰ä¸€ç»„å‘½åå¸¸é‡ã€‚å®ƒæè¿°ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼å¯ä»¥æ˜¯è¿™äº›å‘½åå¸¸é‡ä¸­çš„ä¸€ä¸ª

```ts
// åˆ›å»ºæšä¸¾
enum æšä¸¾å { 
    æšä¸¾é¡¹ = æšä¸¾å€¼,
    æšä¸¾é¡¹ = æšä¸¾å€¼, 
}
```

- è§£é‡Š:
  1. ä½¿ç”¨ `enum` å…³é”®å­—å®šä¹‰æšä¸¾
  2. çº¦å®šæšä¸¾åç§°ä»¥å¤§å†™å­—æ¯å¼€å¤´
  3. æšä¸¾ä¸­çš„å¤šä¸ªå€¼ä¹‹é—´é€šè¿‡ `,`ï¼ˆé€—å·ï¼‰åˆ†éš”
  4. å®šä¹‰å¥½æšä¸¾åï¼Œç›´æ¥ä½¿ç”¨æšä¸¾åç§°ä½œä¸ºç±»å‹æ³¨è§£

### 3.12.2 æ•°å­—æšä¸¾

- é—®é¢˜ï¼šæˆ‘ä»¬æŠŠæšä¸¾æˆå‘˜ä½œä¸ºäº†å‡½æ•°çš„å®å‚ï¼Œå®ƒçš„å€¼æ˜¯ä»€ä¹ˆå‘¢?
- è§£é‡Šï¼šé€šè¿‡å°†é¼ æ ‡ç§»å…¥ Gender.Boyï¼Œå¯ä»¥çœ‹åˆ°æšä¸¾æˆå‘˜ Boy çš„å€¼ä¸º 1
- æ³¨æ„ï¼šæšä¸¾æˆå‘˜æ˜¯æœ‰å€¼çš„ï¼Œé»˜è®¤ä¸ºï¼šä» 0 å¼€å§‹è‡ªå¢çš„æ•°å€¼
- æˆ‘ä»¬æŠŠï¼Œæšä¸¾æˆå‘˜çš„å€¼ä¸ºæ•°å­—çš„æšä¸¾ï¼Œç§°ä¸ºï¼š`æ•°å­—æšä¸¾`
- å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç»™æšä¸¾ä¸­çš„æˆå‘˜åˆå§‹åŒ–å€¼

```ts
{
  /* 
    âœ…å¼€å‘éœ€æ±‚ï¼š
      ç”¨æˆ·ç¼–è¾‘ç•Œé¢ï¼Œç”¨æˆ·é€‰æ‹©çš„æ€§åˆ«    ç”·  å¥³  æœªçŸ¥
      åç«¯æ¥å£å‚æ•°è¦æ±‚ä¼ çš„æ˜¯æ•°å­—å¯¹åº”ä¸º 1   0  -1

    ğŸ‰å¼€å‘ç»éªŒï¼š
      TSé¡¹ç›®ä¸­å¯é€šè¿‡è®¾è®¡æšä¸¾ç»“æ„ï¼Œæé«˜æºä»£ç çš„å¯è¯»æ€§
  */

  // å®šä¹‰æšä¸¾ç»“æ„
  // enum Gender {
  //   Boy = 1,
  //   Girl = 0,
  //   Unknown = -1
  // }

  // ğŸ””è¡¥å……ï¼šæšä¸¾é¡¹ä¼šè‡ªåŠ¨è‡ªå¢ï¼Œé»˜è®¤ä» 0 å¼€å§‹
  enum Gender {
    Unknown = -1,
    Girl,
    Boy,
  }

  // æ¨¡æ‹Ÿåç«¯æ‰€éœ€çš„å‚æ•°
  const query: Gender = {
    name: 'ç”¨æˆ·å',
    // gender: Gender.Boy ç­‰ä»·äº gender: 1ï¼ŒğŸ””ä½†ä»£ç å¯è¯»æ€§æ›´é«˜
    gender: Gender.Boy,
  }

  console.log('query', query)
```

### 3.12.3 å­—ç¬¦ä¸²æšä¸¾-äº†è§£å³å¯

- å­—ç¬¦ä¸²æšä¸¾ï¼šæšä¸¾æˆå‘˜çš„å€¼æ˜¯å­—ç¬¦ä¸²
- æ³¨æ„ï¼šå­—ç¬¦ä¸²æšä¸¾æ²¡æœ‰è‡ªå¢é•¿è¡Œä¸ºï¼Œå› æ­¤ï¼Œ**å­—ç¬¦ä¸²æšä¸¾çš„æ¯ä¸ªæˆå‘˜å¿…é¡»æœ‰åˆå§‹å€¼**

```ts
enum Direction {
  Up = 'UP',
  Down = 'DOWN',
  Left = 'LEFT',
  Right = 'RIGHT'
}
```

### 3.12.4 æšä¸¾å®ç°åŸç†

- æšä¸¾æ˜¯ TS ä¸ºæ•°ä¸å¤šçš„é JavaScript ç±»å‹çº§æ‰©å±•(ä¸ä»…ä»…æ˜¯ç±»å‹)çš„ç‰¹æ€§ä¹‹ä¸€
- å› ä¸ºï¼šå…¶ä»–ç±»å‹ä»…ä»…è¢«å½“åšç±»å‹ï¼Œè€Œæšä¸¾ä¸ä»…ç”¨ä½œç±»å‹ï¼Œè¿˜æä¾›å€¼(æšä¸¾æˆå‘˜éƒ½æ˜¯æœ‰å€¼çš„)
- ä¹Ÿå°±æ˜¯è¯´ï¼Œå…¶ä»–çš„ç±»å‹ä¼šåœ¨ç¼–è¯‘ä¸º JS ä»£ç æ—¶è‡ªåŠ¨ç§»é™¤ã€‚ä½†æ˜¯ï¼Œ**æšä¸¾ç±»å‹ä¼šè¢«ç¼–è¯‘ä¸º JS ä»£ç **

```ts
enum Gender {
    Unknown = -1,
    Girl = 0,
    Boy = 1,
}

// ä¼šè¢«ç¼–è¯‘ä¸ºä»¥ä¸‹ JS ä»£ç ï¼š
var Gender;
(function (Gender) {
    Gender[Gender["Unknown"] = -1] = "Unknown";
    Gender[Gender["Girl"] = 0] = "Girl";
    Gender[Gender["Boy"] = 1] = "Boy";
})(Gender || (Gender = {}));
```

- è¯´æ˜ï¼šæšä¸¾ä¸å‰é¢è®²åˆ°çš„å­—é¢é‡ç±»å‹+è”åˆç±»å‹ç»„åˆçš„åŠŸèƒ½ç±»ä¼¼ï¼Œéƒ½ç”¨æ¥è¡¨ç¤ºä¸€ç»„æ˜ç¡®çš„å¯é€‰å€¼åˆ—è¡¨
- ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ**æ¨èä½¿ç”¨å­—é¢é‡ç±»å‹+è”åˆç±»å‹ç»„åˆçš„æ–¹å¼**ï¼Œå› ä¸ºç›¸æ¯”æšä¸¾ï¼Œè¿™ç§æ–¹å¼æ›´åŠ ç›´è§‚ã€ç®€æ´ã€é«˜æ•ˆ

## 3.13 any ç±»å‹

åœ¨ TypeScript ä¸­ï¼Œä»»ä½•ç±»å‹éƒ½å¯ä»¥è¢«å½’ä¸º any ç±»å‹ã€‚è¿™è®© any ç±»å‹æˆä¸ºäº†ç±»å‹ç³»ç»Ÿçš„é¡¶çº§ç±»å‹.

- **åŸåˆ™:ä¸æ¨èä½¿ç”¨ any**!è¿™ä¼šè®© TypeScript å˜ä¸º â€œAnyScriptâ€(å¤±å» TS ç±»å‹ä¿æŠ¤çš„ä¼˜åŠ¿)
- ä¸€ä¸ªå˜é‡è®¾ç½®ç±»å‹ä¸ºanyåç›¸å½“äºå¯¹è¯¥å˜é‡å…³é—­äº†TSçš„ç±»å‹æ£€æµ‹
- å½“å€¼çš„ç±»å‹ä¸º any æ—¶ï¼Œå¯ä»¥å¯¹è¯¥å€¼è¿›è¡Œä»»æ„æ“ä½œï¼Œå¹¶ä¸”ä¸ä¼šæœ‰ä»£ç æç¤º

```ts
let a: any = 666;
a = "Semlinker";
a = false;
a = 66
a = undefined
a = null
a = []
a = {}

let a: string = 'seven';
a = 7;
// TS2322: Type 'number' is not assignable to type 'string'.
```

- è§£é‡Š:ä»¥ä¸Šæ“ä½œéƒ½ä¸ä¼šæœ‰ä»»ä½•ç±»å‹é”™è¯¯æç¤ºï¼Œå³ä½¿å¯èƒ½å­˜åœ¨é”™è¯¯
- å°½å¯èƒ½çš„é¿å…ä½¿ç”¨ any ç±»å‹ï¼Œé™¤éä¸´æ—¶ä½¿ç”¨ any æ¥â€œé¿å…â€ä¹¦å†™å¾ˆé•¿ã€å¾ˆå¤æ‚çš„ç±»å‹
- å…¶ä»–éšå¼å…·æœ‰ any ç±»å‹çš„æƒ…å†µ
  1. å£°æ˜å˜é‡ä¸æä¾›ç±»å‹ä¹Ÿä¸æä¾›é»˜è®¤å€¼
     ```typescript
     let something;
     something = 'seven';
     something = 7;
     something.setName('Tom');
     ```
  
     ç­‰ä»·äº
  
     ```typescript
     let something: any;
     something = 'seven';
     something = 7;
     something.setName('Tom');
     ```
  2. å‡½æ•°å‚æ•°ä¸åŠ ç±»å‹
- æ³¨æ„ï¼šå› ä¸ºä¸æ¨èä½¿ç”¨ anyï¼Œæ‰€ä»¥ï¼Œè¿™ä¸¤ç§æƒ…å†µä¸‹éƒ½åº”è¯¥æä¾›ç±»å‹

åœ¨è®¸å¤šåœºæ™¯ä¸‹ï¼Œè¿™å¤ªå®½æ¾äº†ã€‚ä½¿ç”¨ `any` ç±»å‹ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ç¼–å†™ç±»å‹æ­£ç¡®ä½†åœ¨è¿è¡Œæ—¶æœ‰é—®é¢˜çš„ä»£ç ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨ `any` ç±»å‹ï¼Œå°±æ— æ³•ä½¿ç”¨ TypeScript æä¾›çš„å¤§é‡çš„ä¿æŠ¤æœºåˆ¶ã€‚è¯·è®°ä½ï¼Œ`any æ˜¯é­”é¬¼ï¼`å°½é‡ä¸è¦ç”¨anyã€‚

ä¸ºäº†è§£å†³ `any` å¸¦æ¥çš„é—®é¢˜ï¼ŒTypeScript 3.0 å¼•å…¥äº† `unknown` ç±»å‹ã€‚

## 3.14 unknown ç±»å‹

### 3.14.1 åŸºæœ¬ä½¿ç”¨

`unknown`ä¸`any`ä¸€æ ·ï¼Œæ‰€æœ‰ç±»å‹éƒ½å¯ä»¥åˆ†é…ç»™`unknown`:

```typescript
// unknown è¡¨ç¤ºæœªçŸ¥ç±»å‹çš„å€¼
let e: unknown;
e = 10;
e = 'hello';
```

`unknown`ä¸`any`çš„æœ€å¤§åŒºåˆ«æ˜¯ï¼š ä»»ä½•ç±»å‹çš„å€¼å¯ä»¥èµ‹å€¼ç»™`any`ï¼ŒåŒæ—¶`any`ç±»å‹çš„å€¼ä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ã€‚`unknown` ä»»ä½•ç±»å‹çš„å€¼éƒ½å¯ä»¥èµ‹å€¼ç»™å®ƒï¼Œä½†å®ƒåªèƒ½èµ‹å€¼ç»™`unknown`å’Œ`any`ã€‚çœ‹çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­:

```typescript
let notSure: unknown = 4;
let uncertain: any = notSure; // OK

let notSure: any = 4;
let uncertain: unknown = notSure; // OK

let notSure: unknown = 4;
let uncertain: number = notSure; // Error
```

> unknown å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªç±»å‹å®‰å…¨çš„any
>
> unknownç±»å‹çš„å˜é‡ï¼Œä¸èƒ½ç›´æ¥èµ‹å€¼ç»™å…¶ä»–å˜é‡ï¼ˆé™¤äº†è‡ªå·±å’Œanyï¼‰

 å¦‚æœä¸ç¼©å°ç±»å‹ï¼Œå°±æ— æ³•å¯¹`unknown`ç±»å‹æ‰§è¡Œä»»ä½•æ“ä½œï¼š

```typescript
function getDog() {
 return '123'
}
 
const dog: unknown = {hello: getDog};
dog.hello(); // Error
```

è¿™ç§æœºåˆ¶èµ·åˆ°äº†å¾ˆå¼ºçš„é¢„é˜²æ€§ï¼Œæ›´å®‰å…¨ï¼Œè¿™å°±è¦æ±‚æˆ‘ä»¬å¿…é¡»ç¼©å°ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`typeof`ã€`ç±»å‹æ–­è¨€`ç­‰æ–¹å¼æ¥ç¼©å°æœªçŸ¥èŒƒå›´ï¼š

```typescript
function getDogName() {
 let x: unknown;
 return x;
};
const dogName = getDogName();
// ç›´æ¥ä½¿ç”¨
const upName = dogName.toLowerCase(); // Error
// typeof
if (typeof dogName === 'string') {
  const upName = dogName.toLowerCase(); // OK
}
```

ä½†æ˜¯è¿™æ ·æ‰èƒ½èµ‹å€¼å¤ªéº»çƒ¦äº†ï¼Œæ‰€ä»¥å¼•å‡ºäº†ç±»å‹æ–­è¨€ã€‚

### 3.14.2 ç±»å‹æ–­è¨€

æœ‰äº›æƒ…å†µä¸‹ï¼Œå˜é‡çš„ç±»å‹å¯¹äºæˆ‘ä»¬æ¥è¯´æ˜¯å¾ˆæ˜ç¡®ï¼Œä½†æ˜¯TSç¼–è¯‘å™¨å´å¹¶ä¸æ¸…æ¥šï¼Œæ­¤æ—¶ï¼Œå¯ä»¥é€šè¿‡ç±»å‹æ–­è¨€æ¥å‘Šè¯‰ç¼–è¯‘å™¨å˜é‡çš„ç±»å‹ã€‚ 

ç±»å‹æ–­è¨€å¥½æ¯”å…¶ä»–è¯­è¨€é‡Œçš„ç±»å‹è½¬æ¢ï¼Œä½†æ˜¯ä¸è¿›è¡Œç‰¹æ®Šçš„æ•°æ®æ£€æŸ¥å’Œè§£æ„ã€‚å®ƒæ²¡æœ‰è¿è¡Œæ—¶çš„å½±å“ï¼Œåªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µèµ·ä½œç”¨ã€‚

TypeScript ç±»å‹æ£€æµ‹æ— æ³•åšåˆ°ç»å¯¹æ™ºèƒ½ï¼Œæ¯•ç«Ÿç¨‹åºä¸èƒ½åƒäººä¸€æ ·æ€è€ƒã€‚æœ‰æ—¶ä¼šç¢°åˆ°æˆ‘ä»¬æ¯” TypeScript æ›´æ¸…æ¥šå®é™…ç±»å‹çš„æƒ…å†µï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š

```ts
const arrayNumber: number[] = [1, 2, 3, 4];
const greaterThan2: number = arrayNumber.find(num => num > 2); // æç¤º ts(2322)
```

å…¶ä¸­ï¼ŒgreaterThan2 ä¸€å®šæ˜¯ä¸€ä¸ªæ•°å­—ï¼ˆç¡®åˆ‡åœ°è®²æ˜¯ 3ï¼‰ï¼Œå› ä¸º arrayNumber ä¸­æ˜æ˜¾æœ‰å¤§äº 2 çš„æˆå‘˜ï¼Œä½†é™æ€ç±»å‹å¯¹è¿è¡Œæ—¶çš„é€»è¾‘æ— èƒ½ä¸ºåŠ›ã€‚

åœ¨ TypeScript çœ‹æ¥ï¼ŒgreaterThan2 çš„ç±»å‹æ—¢å¯èƒ½æ˜¯æ•°å­—ï¼Œä¹Ÿå¯èƒ½æ˜¯ undefinedï¼Œæ‰€ä»¥ä¸Šé¢çš„ç¤ºä¾‹ä¸­æç¤ºäº†ä¸€ä¸ª ts(2322) é”™è¯¯ï¼Œæ­¤æ—¶æˆ‘ä»¬ä¸èƒ½æŠŠç±»å‹ undefined åˆ†é…ç»™ç±»å‹ numberã€‚

ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ç§ç¬ƒå®šçš„æ–¹å¼â€”â€”**ç±»å‹æ–­è¨€**ï¼ˆç±»ä¼¼ä»…ä½œç”¨åœ¨ç±»å‹å±‚é¢çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼‰å‘Šè¯‰ TypeScript æŒ‰ç…§æˆ‘ä»¬çš„æ–¹å¼åšç±»å‹æ£€æŸ¥ã€‚

æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ as è¯­æ³•åšç±»å‹æ–­è¨€ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š

```typescript
const arrayNumber: number[] = [1, 2, 3, 4];
const greaterThan2: number = arrayNumber.find(num => num > 2) as number;
```

**è¯­æ³•**

```typescript
// å°–æ‹¬å· è¯­æ³•
let someValue: any = "this is a string";
let strLength: number = (<string>someValue).length;

// as è¯­æ³•
let someValue: any = "this is a string";
let strLength: number = (someValue as string).length;
```

ä»¥ä¸Šä¸¤ç§æ–¹å¼è™½ç„¶æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œä½†æ˜¯å°–æ‹¬å·æ ¼å¼ä¼šä¸reactä¸­JSXäº§ç”Ÿè¯­æ³•å†²çªï¼Œå› æ­¤æˆ‘ä»¬æ›´æ¨èä½¿ç”¨ as è¯­æ³•ã€‚

å¥½äº†ï¼Œå¯¹äºä¸Šé¢`unknown ç±»å‹`èµ‹å€¼çš„ç±»å‹ä¹Ÿèƒ½è§£å†³äº†ã€‚

```typescript
function getDogName() {
 let x: unknown;
 return x;
};
const dogName = getDogName();

// ç±»å‹æ–­è¨€ 
let upName = (dogName as string).toLowerCase(); // OK

let upName = (<string>dogName).toLowerCase(); // OK
```

> å‘Šè¯‰è§£æå™¨æˆ‘å°±æ˜¯è¿™ä¸ªç±»å‹çš„å°±å¯ä»¥äº†ã€‚

### 3.14.3 éç©ºæ–­è¨€

åœ¨ä¸Šä¸‹æ–‡ä¸­å½“ç±»å‹æ£€æŸ¥å™¨æ— æ³•æ–­å®šç±»å‹æ—¶ï¼Œä¸€ä¸ªæ–°çš„åç¼€è¡¨è¾¾å¼æ“ä½œç¬¦ `!` å¯ä»¥ç”¨äºæ–­è¨€æ“ä½œå¯¹è±¡æ˜¯é null å’Œé undefined ç±»å‹ã€‚**å…·ä½“è€Œè¨€ï¼Œx! å°†ä» x å€¼åŸŸä¸­æ’é™¤ null å’Œ undefined ã€‚**

å…·ä½“çœ‹ä»¥ä¸‹ç¤ºä¾‹ï¼š

```typescript
let mayNullOrUndefinedOrString: null | undefined | string;
mayNullOrUndefinedOrString!.toString(); // ok
mayNullOrUndefinedOrString.toString(); // ts(2531)
```

```typescript
type NumGenerator = () => number;

function myFunc(numGenerator: NumGenerator | undefined) {
  // Object is possibly 'undefined'.(2532)
  // Cannot invoke an object which is possibly 'undefined'.(2722)
  const num1 = numGenerator(); // Error
  const num2 = numGenerator!(); //OK
}
```

### 3.14.4 ç¡®å®šèµ‹å€¼æ–­è¨€

å…è®¸åœ¨å®ä¾‹å±æ€§å’Œå˜é‡å£°æ˜åé¢æ”¾ç½®ä¸€ä¸ª `!` å·ï¼Œä»è€Œå‘Šè¯‰ TypeScript è¯¥å±æ€§ä¼šè¢«æ˜ç¡®åœ°èµ‹å€¼ã€‚ä¸ºäº†æ›´å¥½åœ°ç†è§£å®ƒçš„ä½œç”¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸ªå…·ä½“çš„ä¾‹å­ï¼š

```js
let x: number;
initialize();

// Variable 'x' is used before being assigned.(2454)
console.log(2 * x); // Error
function initialize() {
  x = 10;
}

```

å¾ˆæ˜æ˜¾è¯¥å¼‚å¸¸ä¿¡æ¯æ˜¯è¯´å˜é‡ x åœ¨èµ‹å€¼å‰è¢«ä½¿ç”¨äº†ï¼Œè¦è§£å†³è¯¥é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¡®å®šèµ‹å€¼æ–­è¨€ï¼š

```js
let x!: number;
initialize();
console.log(2 * x); // Ok

function initialize() {
  x = 10;
}
```

é€šè¿‡ `let x!: number;` ç¡®å®šèµ‹å€¼æ–­è¨€ï¼ŒTypeScript ç¼–è¯‘å™¨å°±ä¼šçŸ¥é“è¯¥å±æ€§ä¼šè¢«æ˜ç¡®åœ°èµ‹å€¼ã€‚

## 3.15 æ€»ç»“

- ç±»å‹å£°æ˜

  - ç±»å‹å£°æ˜æ˜¯TSéå¸¸é‡è¦çš„ä¸€ä¸ªç‰¹ç‚¹

  - é€šè¿‡ç±»å‹å£°æ˜å¯ä»¥æŒ‡å®šTSä¸­å˜é‡ï¼ˆå‚æ•°ã€å½¢å‚ï¼‰çš„ç±»å‹

  - æŒ‡å®šç±»å‹åï¼Œå½“ä¸ºå˜é‡èµ‹å€¼æ—¶ï¼ŒTSç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ£€æŸ¥å€¼æ˜¯å¦ç¬¦åˆç±»å‹å£°æ˜ï¼Œç¬¦åˆåˆ™èµ‹å€¼ï¼Œå¦åˆ™æŠ¥é”™

  - ç®€è€Œè¨€ä¹‹ï¼Œç±»å‹å£°æ˜ç»™å˜é‡è®¾ç½®äº†ç±»å‹ï¼Œä½¿å¾—å˜é‡åªèƒ½å­˜å‚¨æŸç§ç±»å‹çš„å€¼

  - è¯­æ³•ï¼š

    - ```typescript
      let å˜é‡: ç±»å‹;
      
      let å˜é‡: ç±»å‹ = å€¼;
      
      function fn(å‚æ•°: ç±»å‹, å‚æ•°: ç±»å‹): ç±»å‹{
          ...
      }
      ```

- è‡ªåŠ¨ç±»å‹åˆ¤æ–­

  - TSæ‹¥æœ‰è‡ªåŠ¨çš„ç±»å‹åˆ¤æ–­æœºåˆ¶
  - å½“å¯¹å˜é‡çš„å£°æ˜å’Œèµ‹å€¼æ˜¯åŒæ—¶è¿›è¡Œçš„ï¼ŒTSç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åˆ¤æ–­å˜é‡çš„ç±»å‹
  - æ‰€ä»¥å¦‚æœä½ çš„å˜é‡çš„å£°æ˜å’Œèµ‹å€¼æ—¶åŒæ—¶è¿›è¡Œçš„ï¼Œå¯ä»¥çœç•¥æ‰ç±»å‹å£°æ˜

- ç±»å‹ï¼š

  |  ç±»å‹   |       ä¾‹å­        |              æè¿°              |
  | :-----: | :---------------: | :----------------------------: |
  | number  |    1, -33, 2.5    |            ä»»æ„æ•°å­—            |
  | string  |  'hi', "hi", hi   |           ä»»æ„å­—ç¬¦ä¸²           |
  | boolean |    trueã€false    |       å¸ƒå°”å€¼trueæˆ–false        |
  | å­—é¢é‡  |      å…¶æœ¬èº«       |  é™åˆ¶å˜é‡çš„å€¼å°±æ˜¯è¯¥å­—é¢é‡çš„å€¼  |
  |   any   |         *         |            ä»»æ„ç±»å‹            |
  | unknown |         *         |         ç±»å‹å®‰å…¨çš„any          |
  |  void   | ç©ºå€¼ï¼ˆundefinedï¼‰ |     æ²¡æœ‰å€¼ï¼ˆæˆ–undefinedï¼‰      |
  |  never  |      æ²¡æœ‰å€¼       |          ä¸èƒ½æ˜¯ä»»ä½•å€¼          |
  | object  |  {name:'å­™æ‚Ÿç©º'}  |          ä»»æ„çš„JSå¯¹è±¡          |
  |  array  |      [1,2,3]      |           ä»»æ„JSæ•°ç»„           |
  |  tuple  |       [4,5]       | å…ƒç´ ï¼ŒTSæ–°å¢ç±»å‹ï¼Œå›ºå®šé•¿åº¦æ•°ç»„ |
  |  enum   |    enum{A, B}     |       æšä¸¾ï¼ŒTSä¸­æ–°å¢ç±»å‹       |

